<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>打开量化投资的黑箱 - 独行深山</title>
    <meta name="author"  content="王君敕">
    <meta name="description" content="打开量化投资的黑箱">
    <meta name="keywords"  content="量化">

    <meta property="og:title" content="打开量化投资的黑箱 - 独行深山">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wangxuan.me/notes/2024/07/08/Inside-the-Black-Box.html">
    <meta property="og:description" content="去创造点什么而不是依靠别人活着">
    <meta property="og:site_name" content="独行深山">
    <link rel="stylesheet" href="//cdn.staticfile.org/normalize/6.0.0/normalize.min.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_roc50gemkxpw4s4i.css">
    <link rel="stylesheet" href="/assets/css/github-markdown.css">
    <link rel="stylesheet" href="/assets/css/prism.css">
    <link rel="stylesheet" href="/assets/css/share.min.css">
    <link rel="stylesheet" href="/assets/css/app.min.css">
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>
<body>
    <!--[if lt IE 10]>
<div class="alert-danger" role="alert">你的浏览器实在太太太旧了，放学别走，升级完浏览器再说！<a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div>
<![endif]-->
<input id="nm-switch" type="hidden" value="true">

<header class="g-header">
    <div class="g-logo">
      <a href="/"></a>
    </div>
    <i id="menu-toggle" class="iconfont icon-menu"></i>
    <nav class="g-nav">
        <ul>
            
            <li><a href="/">首页</a></li>
            
            <li><a href="/tags.html">标签</a></li>
            
            <li><a href="/categories.html">分类</a></li>
            
            <li><a href="/fastpages/">兜率宫</a></li>
            
            <li><a href="/about.html">关于</a></li>
            
        </ul>
    </nav>
</header>


<header class="g-banner post-header post-pattern-circuitBoard bgcolor-default " data-theme="default">
    <div class="post-wrapper">
        <div class="post-tags">
            
            
            <a href="https://wangxuan.me/tags#%E9%87%8F%E5%8C%96" class="post-tag">量化</a>
            
            
        </div>
        <h1>打开量化投资的黑箱</h1>
        <div class="post-meta">
            <span class="post-meta-item"><i class="iconfont icon-author"></i><a href="https://wangxuan.me" target="_blank" rel="author">王君敕</a></></span>
            <time class="post-meta-item" datetime="24-07-08"><i class="iconfont icon-date"></i>08 Jul 2024</time>
        </div>
    </div>
    
    <div class="filter"></div>
    <div class="post-cover" style="background: url('/assets/images/20240708/cover.jpg') center no-repeat; background-size: cover;">
    
</header>

<div class="post-content">
    
    <h2 class="post-subtitle">简明量化交易指南</h2>
    
    <article class="markdown-body">
        <h2 id="推荐序">推荐序</h2>
<blockquote>
  <p>量化定义：为解决市场效率低下问题而将人类设计的策略系统化地执行。</p>
</blockquote>

<blockquote>
  <p>自从马科维茨博士1952年提出日后为其赢得诺贝尔奖的投资组合理论假设后，量化交易策略的实施过程就处于不断的进步之中。</p>
</blockquote>

<p>投资组合理论,这个需要深入研究</p>

<p><a href="https://wiki.mbalib.com/wiki/%E6%8A%95%E8%B5%84%E7%BB%84%E5%90%88%E7%90%86%E8%AE%BA">投资组合理论-MBA智库百科(mbalib.com)</a></p>

<h2 id="前言">前言</h2>
<blockquote>
  <p>阿尔法策略通过择时和调整持仓头寸进而获利；贝塔策略是复制或者稍微改进指数的表现，</p>
</blockquote>

<p>阿尔法策略:</p>
<ul>
  <li>阿尔法策略是一种寻求超越市场平均表现的主动投资策略</li>
  <li>它依赖于投资者或基金经理的能力来选择个股或行业，以实现超过基准指数的收益</li>
  <li>这种策略通常涉及对冲β部位的风险，通过衍生品等金融工具来获得正的阿尔法收益</li>
  <li>阿尔法策略并不依赖于对市场趋势的预测，而是专注于相对于指数的投资价值</li>
</ul>

<p>贝塔策略:</p>
<ul>
  <li>贝塔策略是一种被动投资策略，旨在跟踪市场指数的表现</li>
  <li>它通常通过被动投资来实现，如购买指数基金或交易所交易基金（ETFs）</li>
  <li>贝塔策略可能在长期内盈利，但由于市场波动，在特定时间内可能会出现亏损或被套住的情况</li>
  <li>在上涨趋势中，贝塔策略可能只做多股票或期指；而在下跌趋势中，可能只做空期指或融券卖出</li>
</ul>

<h2 id="第一章-关注量化交易的原因">第一章 关注量化交易的原因</h2>

<h3 id="风险的正确测量与错误测量">风险的正确测量与错误测量</h3>

<blockquote>
  <p>纪律严明的量化策略要求精确划分所能接受的范围，并且将所能承担的风险控制在一定范围内。为了彻底清除这些风险，宽客必须事先知道这些风险是什么以及如何度量这些风险。例如，认为没有足够能力预测市场运行的方向的许多股票量化交易者，都会度量市场风险敞口程度（利用净头寸或者贝塔系数度量），通过平衡多头和空头组合以使得风险暴露处在较低的一个水平。</p>
</blockquote>

<h2 id="第二章-量化交易简介">第二章 量化交易简介</h2>

<blockquote>
  <p>第3版《韦氏新国际词典》定义鲁布·戈德堡装置为“通过极其复杂迂回的方法实现看似运行比较简单”的装置。</p>
</blockquote>

<blockquote>
  <p>如果建仓的点位选择及头寸的规模大小都是系统自动生成的，则是量化交易；如果两者中有一个是需要人工干预的，就不是量化交易。</p>
</blockquote>

<h2 id="第三章-宽客如何盈利">第三章 宽客如何盈利</h2>

<h3 id="理论驱动型阿尔法模型">理论驱动型阿尔法模型</h3>

<blockquote>
  <p>理论驱动型交易策略可以较为容易地划分为六类：趋势型（trend）、回复型（reversion）、技术情绪型（technicalsentiment）、价值型/收益型（value/yield）、成长型（growth）和品质型（quality）。</p>
</blockquote>

<blockquote>
  <p>试图预测价格并从中获利的宽客，通常都是在分析以下两种现象之一：一是已有的趋势是否会延续，二是目前的趋势是否会反转。换句话说，价格是沿着目前的态势继续向前还是会反向波动。前者我们称为趋势跟随策略（trendfollowing）或动量策略（momentum），后者称为反趋势策略（counter-trend）或均值回复策略（meanreversion）。</p>
</blockquote>

<h4 id="趋势跟随策略">趋势跟随策略</h4>
<blockquote>
  <p>趋势跟随策略是基于以下基本假定：在一定时间内市场通常是朝着同一方向变化。</p>
</blockquote>

<p><strong>一定时间是多久？</strong></p>

<blockquote>
  <p>一方面，劳动力市场看着不错，但通货膨胀过于严重，贸易赤字在不断扩大；另一方面，居民消费仍在快速增长，并且房地产市场表现强劲。这种看似相互矛盾的情形是市场的常态，有些指标是利好的，而另一些看起来是利空的。</p>
</blockquote>

<p><strong>哪些是利好，为什么？哪些事利空，为什么？</strong></p>

<blockquote>
  <p>另一种对趋势的解释，被亲切地称为博傻理论（greaterfoolstheory）。博傻理论认为，人们因为相信趋势才会去追涨杀跌，这种行为反过来又促进了趋势的形成。关键在于将持有的产品卖给更“傻”的下家而避免自身成为最后的持有者。</p>
</blockquote>

<blockquote>
  <p>定义趋势的一种方法是移动平均线交叉指标（moving average cross over indicator），通过对比较短期间和较长期间的某个指标来判断趋势，例如通过短期（60天）价格均线和长期（200天）价格均线的交叉点来判断趋势。当短期均线位于长期均线之下时，认为市场处于下跌趋势；反之则认为市场处于上涨趋势。</p>
</blockquote>

<blockquote>
  <p>通常来说，成功的趋势跟随者冒着资产净值减少1%的风险换来的收益达不到1%。换言之，为了得到50%的年化收益率，投资者要做好可能至少损失50%的风险准备。简言之，趋势跟随策略的收益极其不稳定。</p>
</blockquote>

<h4 id="均值回复策略">均值回复策略</h4>
<blockquote>
  <p>该策略认为，价格终究会沿着已有趋势的反方向运动，而不可能一直延续已有趋势。<br />
均值回复策略的基本理论认为，价格围绕其价值中枢而上下波动，判断出这个中枢以及波动的方向便足以捕捉到交易机会。</p>
</blockquote>

<p>有趣的是，趋势跟随策略和均值回复策略并不一定是相互冲突的。趋势通常是长期的，而短期内围绕着趋势的小范围波动也是很常见的。事实上，一些宽客会组合使用这两种策略。采用均值回复策略的交易者，必须识别出目前的价格中心或均衡点，并判断偏离均衡点多少时值得进行交易。</p>

<p>策略。趋势通常在较长的投资期限上延续，而均值回归通常适用于短期投资期限。</p>

<h4 id="技术情绪型策略">技术情绪型策略</h4>

<blockquote>
  <p>主要通过追踪投资者情绪相关指标来判断预期回报，这些指标常见的有交易价格、交易量以及波动&gt;性指标等。</p>

  <p>这一点。第一种是观察认购量和认沽量，将此作为市场情绪的指标。如果认沽多于认购的程度已经&gt;超过正常水平，这可能意味着投资者担心未来的价格会下跌。如果相对于认购期权，认沽期权的数&gt;量比正常水平要少，说明市场上主要是看涨情绪。</p>

  <p>股票价格慢涨快跌的特点可以作为一部分原因对此进行解释。</p>

  <p>限价指令簿的形态包含很多信息，如相对于最优买入/卖出价的买卖单的量而言买方和卖方出价的&gt;规模，以及买入卖出报价单的总量等。</p>

  <p>成交量大或换手率很高的股票预计会表现不佳，而低成交量或低换手率的股票将会表现出色。</p>

  <p>在其阿尔法模型中使用基本面数据的很多交易策略都可以被归为以下三类中的一种：价值型/收益型、成长型和品质型。</p>
</blockquote>

<p>股票的贝塔系数（Beta Coefficient）是一种衡量个别股票或投资组合相对于整个市场波动性的指标。它用于评估证券系统性风险，即由整体经济状况和市场因素所造成的风险。贝塔系数反映了个股对市场变化的敏感性，也就是个股与大盘的相关性或“股性”。
贝塔系数的计算通常基于历史数据，通过将单个股票的收益与市场收益的协方差除以市场收益的方差来得出。<br />
在实际应用中，投资者可以根据贝塔系数选择不同的证券进行投资，以获得预期的收益和风险水平。例如，在牛市时，选择高贝塔系数的证券可以获得更高的收益。此外，贝塔系数也是资本资产定价模型（CAPM）的关键组成部分，用于计算资产的预期回报和风险</p>

<blockquote>
  <p>根据股票的账面净值与股价的比率以及股票市值的历史记录，再结合股票的贝塔系数，可以对预期收益做出更准确的预测。</p>
</blockquote>

<h5 id="价值型">价值型</h5>
<blockquote>
  <p>价值型策略的基本理念是，收益率越高，价格越低。使用将常见比率求倒数得到的收益率的益处&gt;是，有利于分析方法的简洁性和一致性。</p>
</blockquote>

<blockquote>
  <p>实际上，价值型投资策略认为，市场倾向于高估高风险资产的风险，而低估低风险资产的风险。</p>
</blockquote>

<blockquote>
  <p>价值型交易的另一个重要例子是在股票交易中。各类投资者都试图寻找指标来度量“便宜”，如税息&gt;折旧及摊销前利润（EBITDA）对企业价值（EV）的比率或市净率。每股账面净值对股价的比率（账&gt;面收益率）也是个常用指标，自从法玛和弗伦奇在其论文中经常使用这一指标，账面收益率在宽客&gt;圈内逐渐流行起来。绝大部分使用股票价值型策略的宽客是在寻找相对价值较低的股票，而不是评&gt;估某只股票是便宜还是贵。这个策略通常称为量化多空策略（quantlong/short，QLS）。</p>
</blockquote>

<blockquote>
  <p>展期收益（rollyield）是指在未来某天到期的期货合约价格和现货价格（或在相对较短时间内到期的期货合约）之间的价差。</p>
</blockquote>

<h5 id="成长型">成长型</h5>

<blockquote>
  <p>成长型策略试图通过对所考虑资产以往的增长水平进行分析而对未来的走势进行预测。</p>
</blockquote>

<h5 id="品质型">品质型</h5>
<blockquote>
  <p>第一类是杠杆比率（leverage）。基于对杠杆比率的度量，在其他条件无差别时，应该卖出高杠杆比率的公司的股票而买入低杠杆比率的公司的股票。</p>
</blockquote>

<blockquote>
  <p>第二类度量品质的指标是收入来源的多样性（diversity of revenue source）。</p>
</blockquote>

<blockquote>
  <p>第三类度量品质的指标是管理水平（management quality）。</p>
</blockquote>

<blockquote>
  <p>第四类度量品质的指标是欺诈风险（fraud risk）。该指标认为，应该买入（卖出）欺诈风险较低（高）的公司股票或国家外汇。量化股票多空策略中的收益质量（earningsquality）指标便是欺诈风险的一个实例。</p>
</blockquote>

<p>如何看一家公司的杠杆比率</p>

<p>要评估一家公司的杠杆比率，您可以查看其财务报表中的几个关键指标。杠杆比率是衡量公司债务水平和资本结构的指标，它可以帮助投资者了解公司对债务的依赖程度以及其偿债能力。以下是几个常用的杠杆比率指标：</p>

<ol>
  <li>
    <p>总债务比率 (Total Debt Ratio):<br />
$\text{总债务比率} = \frac{\text{总债务}}{\text{总资产}}$<br />
这个比率显示了公司资产中有多少是通过债务融资的。</p>
  </li>
  <li>
    <p>长期债务比率 (Long-term Debt Ratio):<br />
$\text{长期债务比率} = \frac{\text{长期债务}}{\text{总资产}}$<br />
这个比率专注于公司的长期债务。</p>
  </li>
  <li>
    <p>资本化比率 (Capitalization Ratio):<br />
$\text{资本化比率} = \frac{\text{长期债务}}{\text{长期债务} + \text{股东权益}}$<br />
这个比率比较了长期债务与公司股东权益的相对大小。</p>
  </li>
  <li>
    <p>负债与净资产比率 (Debt-to-Equity Ratio):<br />
$\text{负债与净资产比率} = \frac{\text{总负债}}{\text{股东权益}}$<br />
这个比率显示了相对于股东权益，公司有多少负债。</p>
  </li>
  <li>
    <p>利息保障倍数 (Times Interest Earned):<br />
$\text{利息保障倍数} = \frac{\text{息税前利润 (EBIT)}}{\text{利息费用}}$<br />
这个比率衡量公司支付利息之前的盈利能力。</p>
  </li>
</ol>

<p>这些比率可以在公司的资产负债表和利润表中找到所需的数据来计算。通过比较这些比率与行业平均水平或公司过去的数据，可以对公司的财务健康状况和风险水平有一个更好的理解。</p>

<blockquote>
  <p>2008年，品质型策略在预测银行股的相对价格中大放异彩，尤其是一些品质型策略帮助投资者识别、避开并卖出具有高杠杆比率或涉猎大量抵押类业务的银行股从而使投资者避开2008年的信用危机带来的损失，甚至从中获利。</p>
</blockquote>

<h3 id="数据驱动型阿尔法模型">数据驱动型阿尔法模型</h3>

<blockquote>
  <p>这类模型有两大优势。首先，与理论型策略相比，数据挖掘明显更具有技术挑战性，并且在实业界使用很少。这意味着市场上少有竞争者，这是大有裨益的。</p>
</blockquote>

<blockquote>
  <p>其次，数据驱动型策略可以分辨出一些市场行为，无论该行为目前是否可以用理论加以解释，从而即使不理解某些市场行为的成因依然可以发现它们。</p>
</blockquote>

<blockquote>
  <p>经验主义者可以通过各种数据进行验证，最终找到具有统计学意义上的显著性的结果。</p>
</blockquote>

<blockquote>
  <p>数据挖掘型策略也有很多缺陷。首先，研究人员必须决定用什么数据去建模。如果他所使用的数据和想要预测的东西根本没有联系或者联系甚微，他可能得到看似显著实际很荒谬的结果。
例如，使用过去50年每天的月相去预测股市的价格。其次，如果研究人员使用所有被认为有助于进行市场预测的变量，那么算法所需要的计算量会大到无法实现。</p>

  <p>除了计算量上的困难之外，还有个问题需要考虑。使用这种方式从历史数据得到策略，相当于假设了未来和历史的表现会很类似，而实际上很多时候未来的走势会和历史数据差别很大，即便差别不大也只是在较短时间内。为解决这一问题，数据挖掘类策略需要经常性的调整，以便与市场变化保持一致，而这种调整本身又含有很大风险。</p>

  <p>基本上使用数据挖掘策略的宽客都是首先观察目前的市场环境，然后在历史数据中寻找类似的环境，来衡量市场接下来的几种走势的出现概率，基于这种可能性进行交易。</p>

  <p>如何定义“目前的市场环境”?
谈及“环境”，我们是考虑价格因素，还是交易量或基本面数据？这不仅仅是个学术问题：对小型技术公司股票的价格变动的处理方式和处理大型多元化金融公司的股价波动的手段是否相同，涉及市场如何运作的基本理念问题。</p>

  <p>寻找“相似”模式使用什么搜索算法？</p>

  <p>如何确定历史数据的回溯时间段？</p>
</blockquote>

<h3 id="实施策略">实施策略</h3>
<ul>
  <li>预测目标</li>
  <li>投资期限</li>
  <li>投注结构
    <blockquote>
      <p>阿尔法模型的下一个关键要素是投注结构，依赖于模型进行预测。模型既可以预测金融产品自身的信息，也可以预测其相对于其他金融产品的信息。例如，模型可以预测金价处于低位未来会上涨，或金价相对于银价较为便宜，未来会比白银有更强的走势。在进行相对预测时，我们可以选择预测小类的（例如，配对金融产品）表现或者大类的（例如，一个门类）表现。相对而言，小类更易于理解和分析。特别地，配对交易是比较受欢迎的做法，因为理论上我们可以选择能直接进行比较的两种产品。</p>

      <p>另一种方法是在大类中投注。研究人员把证券进行分类，主要是为了隔离和消除类内的共同因素。例如，依据市场板块对股票进行分组，很大程度上就是为了消除整个板块波动的影响而专注于板块内部股票价格的相对变化情况。
因此，以组群进行交易的绝大部分宽客，在进行投注时倾向于使用较大规模的分组而不是两两配对。</p>

      <p>研究人员还必须选择如何分组，或者使用统计学方法，或者依靠直觉（例如按照基本面的产业门类）。</p>

      <p>一些宽客试图通过同时使用几种分组技术来减弱单一分组带来的风险。例如，首先利用板块对股票进行分组，然后利用动态的统计学方法来改进这些分组，以更好地反映股票间近期的相关关系。</p>
    </blockquote>
  </li>
</ul>

<p>一个策略可以被用在各种金融产品上，宽客必须决定其适用于哪些金融产品。投资范围选择：地理范围，资产种类，产品类别，税务原因。</p>

<p>投资范围的选择很大程度上取决于宽客的个人偏好。第一，宽客倾向于流动性好的产品，因为其交易成本是可以预计的。第二，宽客一般需要大量的优质数据。通常这种数据在具有高流动性的比较成熟的市场上更易获取。第三，宽客更喜欢那些易于使用体系化的模型进行预测的金融产品。返回到生物科技公司股票的例子，一些宽客根本不考虑它们，因为政府部门批准或拒绝了其研发的新药之类的事件会造成其股价快速而剧烈的波动，这具有很强的偶发性因而难以系统地加以预测。</p>
<ul>
  <li>模型设定
必须对策略的方方面面给出详细的定义。</li>
</ul>

<p>重拟合也可能导致出现过度拟合的风险。过度拟合也是个很危险的问题，会导致一些虚假的、短暂的关系被错认为是有效的、具有持续性的。</p>

<ul>
  <li>条件变量</li>
  <li>
    <p>运行频率
创建阿尔法模型的最后一个要素是给出运行频率（runfrequency），即模型寻找新的交易机会的频率。</p>
  </li>
  <li>策略的多样性
成功的宽客都具有以下特征：令人难以置信地注重细节，不知疲倦地提出恰当的问题并找到最佳解决方案。</li>
</ul>

<h3 id="混合型阿尔法模型">混合型阿尔法模型</h3>
<p>进行混合预测的3种最常用量化方法分别是线性模型、非线性模型和机器学习模型。第4种重要流派认为，阿尔法模型根本不应该进行混合，而是应该基于每一种阿尔法模型构建一个投资组合，之后构建一系列的投资组合。</p>

<p>机器学习模型来决定各种阿尔法模型的最优权重。 <strong>怎么用的？用的哪个模型？</strong></p>

<h2 id="第四章-风险模型">第四章 风险模型</h2>
<h3 id="控制风险规模">控制风险规模</h3>
<p>(1) 控制规模的方式
 (2) 度量风险的方式
 (3) 怎么才算控制了规模</p>

<p>理论驱动型方法通常是先设定一个任意值再加以验证，如果有必要，就继续调整至一个满意的结果。</p>

<p>市场上，对风险的度量有两种被广为认可的方式。第一种是通过纵向方式来度量不确定性，计算不同时期各个产品收益的标准差来度量风险。在金融业中，这个概念通常称为波动率。波动率越高，说明目前的市场风险越大。度量风险的第二种方式是，在给定产品范围内对各种金融产品表现的相似水平进行测量，通常是计算在给定时间所有相关金融产品的横截面标准差（cross-sectionalstandarddeviation）。标准差越大，说明所包含在内的金融产品的表现种类越多样化。</p>

<p>宽客称（标准差）这个概念为离散（dispersion）。离散也可以使用给定范围内金融产品的相关系数或协方差来度量。同样地，产品之间的相似度越高，市场风险越大。</p>

<p><strong>凯利准则</strong>基于投注者的边际收益提供了系统化度量投注风险的方法，可以最大化投注的期望收益。这里的收益是通过投注输赢的概率和金额进行组合得到的。这一概念被广泛地应用于赌博和投资的一些领域。</p>

<h3 id="限制风险种类">限制风险种类</h3>
<ul>
  <li>理论驱动型风险模型</li>
  <li>经验型风险模型
经验型风险模型和理论驱动型风险模型都是基于同样的假设：系统风险可以被度量并加以减缓。</li>
</ul>

<h2 id="第五章-交易成本模型">第五章 交易成本模型</h2>
<h3 id="定义交易成本">定义交易成本</h3>
<ul>
  <li>佣金和费用</li>
  <li>滑点
滑点是指从交易者决定开始交易到订单进入交易所系统实际被执行这两个时间段所发生的价格变动。
    <h3 id="交易成本模型的种类">交易成本模型的种类</h3>
    <p>依据对于给定交易的交易成本如何计算，有4类基本的交易成本模型：常值型、线性、分段线性以及二次型交易成本模型。</p>
  </li>
</ul>

<h2 id="第六章-投资组合构建模型">第六章 投资组合构建模型</h2>
<h3 id="基于规则的投资组合构建模型">基于规则的投资组合构建模型</h3>
<p>常见的基于规则的投资组合构建模型有4类：相等头寸加权、相等风险加权、阿尔法驱动型加权和决策树加权。</p>
<h3 id="投资组合最优化">投资组合最优化</h3>
<h4 id="优化技术的输入变量">优化技术的输入变量</h4>
<ol>
  <li>期望收益</li>
  <li>期望波动率
最为常用的是1986年丹麦计量经济学家提姆·波勒斯列夫（TimBollerslev）在《计量经济杂志》（JournalofEconometrics）所提出的广义自回归条件异方差模型（GeneralizedAutoregressiveConditionalHeteroskedasticity，GARCH）。以GARCH模型为基础进行随机波动建模的方法不胜枚举。</li>
  <li>期望相关性
优化工具的第三个输入变量是相关系数矩阵。相关系数是衡量两个产品变化的相似程度的核心度量，取值范围介于-1到1之间。相关系数为1表示完全类似，相关系数为-1则表示两种产品完全相反，或负相关。相关系数为0则表示完全不相关，表明两种产品完全不类似，但也不是反向变动的。</li>
</ol>

<h4 id="优化技术">优化技术</h4>
<ul>
  <li>无约束条件的优化方法</li>
  <li>带约束条件的优化方法</li>
  <li>布莱克-李特曼优化方法
他们提出了一种方法，在投资者期望中融入了置信度的概念，并把这些与历史数据结合了起来。</li>
</ul>

<p>进一步讲，如果在某种程度上投资者对某些预测很有信心而对另一些不太有信心，可以将二者结合起来。如果投资者预测两种产品间会出现显著的偏离但预测的置信度不高，而历史上二者间相关性很强，那么就应该使用更接近历史相关性水平的一些指标方法。如果投资者的信心越强，在使用布莱克-李特曼优化方法决定相关系数时，预测收益就会发挥更为重要的作用。</p>
<ul>
  <li>格里德诺-卡恩方法：优化要素投资组合
这种方法的主要思想是建立因素投资组合群，其中每个投资组合都是基于规则（实际上通常都是等权重或等风险权重）考虑单一种类的阿尔法预测而构建的。所以，可以考虑构建动量型投资组合、价值型投资组合和成长型投资组合。</li>
  <li>重新取样效率
米肖提出使用蒙特卡罗模拟（MonteCarlosimulation）的方法对数据进行重新取样，以减小优化工具输入变量的估计误差。蒙特卡罗模拟方法会对历史数据进行多次重新组合，基于真实观测得到多个时间序列。</li>
  <li>基于数据挖掘的最优化方法
使用机器学习类方法寻找最优投资组合的质量，比其他算法尤其是均值方差优化技术的质量要更好一些。</li>
</ul>

<h2 id="第八章-数据">第八章 数据</h2>
<h3 id="数据的重要性">数据的重要性</h3>
<p>如果你获得的是宏观经济方面的数据，你很难得到一点儿也不反映宏观经济状况的模型。</p>

<p>1999年的火星气候卫星（MarsClimateOrbiter，MCO）的失败就是个很典型的例子。价值两亿美元的卫星由于与大气层的摩擦而被烧毁，发生这一事故的原因是，项目组的软件工程师在编写控制卫星助推器的程序时按照牛顿为力学单位进行设计，而另一个项目组在处理传输到卫星的数据时用的力学单位是磅力。控制卫星助推器的模型运行准确，但是由于输入数据的单位不对（数据被缩小为原来的1/4.5），卫星下降时偏离轨道，距离火星的大气层过近而导致发生摩擦被毁掉。事故发生后，美国国家航空航天局（NASA）并没有把事故原因归咎于软件错误，而是认为对软件进行检验和重检的过程以及输入软件的数据造成了这次事故。</p>

<h3 id="数据类型">数据类型</h3>
<p>数据基本上可以分为两大类：价格数据（pricedata）和基本面数据（fundamentaldata）。</p>

<h2 id="第九章-研究">第九章 研究</h2>
<h3 id="研究蓝图-科学的方法">研究蓝图： 科学的方法</h3>
<p>尚未被反驳的理论，只是暂时被认为是正确的。但是我们不能确定下一个观察到的现象不会证明其理论是错误的。牛顿的万有引力定律从未被“证明”，事实上，已经被爱因斯坦的广义相对论所取代。爱因斯坦的广义相对论也没有被证明。有些问题既不能用牛顿定律也不能用爱因斯坦的相对论进行解释，需要其他理论进行解释，诸如宇宙的加速膨胀现象和银河系外围星球的不可预期的高速度。</p>

<h3 id="思想的产生">思想的产生</h3>
<p>思想的4个共有来源是：对市场的观察结果、学术文献、研究员或者投资组合经理在量化公司之间的迁移以及来自主观判断型交易者活动的教训。</p>

<h3 id="检验">检验</h3>
<p>通过计算每天标准普尔500指数和10年国债收益率的差进行衡量。如果标准普尔500指数收益率高于债券收益率，这被看作做多股票的信号。</p>

<p>奥卡姆剃刀准则大概是由原始的拉丁语翻译得到，原始的拉丁语意思是：“如无必要，勿增实体”（Entities must not be multiplied beyond necessity）。</p>

<h2 id="第十章-量化策略的风险内生性">第十章 量化策略的风险内生性</h2>
<h3 id="模型风险">模型风险</h3>
<p>2012年8月，骑士资本交易在短短的30分钟损失超过4亿美元，是由软件的某个部分由休眠状态转为活跃状态的错误而引起。订单量成几何数量增加，使得骑士在高价位累积了大量头寸。当它们卖出这些头寸，损失达到9位数。无论资本还是信心方面，骑士资本都受到很大的影响。公司几乎破产，为了生存，公司被迫以极其不合理的折扣价将超过70%的资本卖给投资者集团。这里并不是要挑剔它们，但是这不是骑士资本第一次犯执行错误。2011年3月，骑士资本的一个“过程错误”使得一些新创交易所交易基金（ETF）的价值立即从初始阶段的80%变至100%（交易所取消了它们的交易）。</p>

<p>法国安盛在它的风险模型中也有一个代码错误，导致客户损失2.17亿美元，法国安盛集团最终向投资者做出赔偿，并向证监会支付2500万美元的赔偿金，才得以解决这件事情。在这</p>

<p>但是当服务器重新启动后，执行服务器最先在线，几分钟以后，阿尔法模型才重新恢复服务。执行模型，由于没有看到阿尔法模型发来的任何信号，快速自动地开始清算投资组合以消除风险。在阿尔法服务器恢复服务之前很短的时间里，公司投资组合的80%被清算，然后不得不重新构建。</p>

<h3 id="宽客如何监控风险">宽客如何监控风险</h3>
<p>存在着各种各样的监控工具、最著名的是敞口监控工具、利润和损失监控工具、执行监控工具和系统性能监控工具。</p>

<p>敞口监控工具（exposuremonitoringtools）足够简单。它们从当前持有头寸开始，然后根据经理所关心的敞口进行分组和/或分析头寸。</p>

<p>损益监控（profitandlossmonitors）同样是简单的。它们也是从当前投资组合开始，但是接下来它们关心投资组合前一天的收盘价，并对同一产品的收盘价与当前市场的价格进行比较。</p>

<p>损益监控的其他类型是观察如何赚钱或者赔钱，而不是观察是否赚钱或者赔钱。</p>

<p>执行监控工具（executionmonitoringtools）通常是用来显示量化交易者的执行进度。</p>

<p>系统性能监控工具（systemsperformancemonitors）广泛被用来检测软件和基础设施错误。</p>

<h2 id="第十一章-对量化交易的批评">第十一章 对量化交易的批评</h2>
<h3 id="由于低估风险宽客引起更多的市场波动性">由于低估风险，宽客引起更多的市场波动性</h3>

<p>证券价格的确定和信用风险的分析有大量相当成熟的数学算法[3]，例如copulas函数、Lévy模型和鞍点逼近理论。</p>

<h3 id="宽客在市场挖掘中存在错误">宽客在市场挖掘中存在错误</h3>
<p>相对较长周期而言，较短周期更能经得起数据挖掘的考验。</p>

<p>第一，这可能是因为进行短周期的分析，能获得很多交易数据观测值，可供分析的数据量在逐步增长。</p>

<p>第二，在较短的周期内，理论家不能对人们的交易行为进行有用的解释，实用指导是，持有周期少于1天的策略，数据挖掘策略可能更有用。对于持有周期近似为一个星期的策略，将数据挖掘技巧与健全的市场理论相结合的混合策略更有用。</p>

<p>第三，对于期望持有周期为数月或数年的策略，如果依赖数据挖掘技巧，可能是不奏效的。</p>

<h2 id="第十二章-评估宽客和量化交易策略">第十二章 评估宽客和量化交易策略</h2>
<p>宽客评估者有两个目标。第一个是理解策略本身，包括风险种类和利润来自哪里。第二个目标是判断宽客有多优秀。</p>
<h3 id="收集信息">收集信息</h3>
<p>有一本优秀的书叫作《审问者》（The Interrogator），作者是雷蒙德·托利弗（Raymond Toliver），从这本书可以学到许多有用的经验，例如如何从宽客那里获取信息。这本书的主人公汉斯·约阿希姆·沙尔夫（Hanns Joachim Scharff）是“二战”时期的德国空军审讯者，他没有使用体罚或心理压迫技巧，成功地从飞机被击落的盟军飞行员那里收集信息。沙尔夫主要使用的3个手段是：信任建立、专业知识和追踪并检索信息的组织体系。</p>

<h3 id="评估量化交易策略">评估量化交易策略</h3>
<p>评估基金经理时，必须严格检查这些内容中的任何一个。一般来说，宽客应该愿意回答这些问题。我问宽客的几个问题如下。</p>

<h4 id="研究和发展策略">·研究和发展策略。</h4>
<ul>
  <li>对于交易策略，你如何提出新的想法？</li>
  <li>对这些想法如何进行测试？</li>
  <li>拟合这些模型的方法是什么，样本内测试和样本外测试的方法是什么？</li>
  <li>策略是否有效的判断依据是什么？</li>
</ul>

<h4 id="数据搜寻收集清洗以及管理">·数据搜寻、收集、清洗以及管理。</h4>
<ul>
  <li>你使用的数据是什么？</li>
  <li>你如何存储数据？为什么要采用这种存储方法？</li>
  <li>你如何清洗数据？</li>
</ul>

<h4 id="投资选择和构造">·投资选择和构造。</h4>
<ul>
  <li>你能描述阿尔法背后的理论吗？</li>
  <li>你所使用的阿尔法策略是哪一种类型（例如，趋势型、反转型、情绪指标、价值型/收益型、成长型或品质型）？</li>
  <li>你做的是相对赌注还是方向型赌注？</li>
  <li>如果是相对的，确切的相对均值是多少？</li>
  <li>你的阿尔法策略适用的投资期限是多长，投资领域有哪些？</li>
  <li>你如何组合不同的阿尔法模型？
    <h4 id="投资组合构建">·投资组合构建。</h4>
  </li>
  <li>你如何构建你的投资组合？也就是说，你如何确定头寸大小？</li>
  <li>有限额吗？为什么这样设置？</li>
  <li>投资组合构建模型的输入参数有哪些？</li>
  <li>你在投资组合构建模型中获得什么？（即，你的“目标函数”是什么？）
    <h4 id="执行">·执行。</h4>
  </li>
  <li>你所用的交易成本模型是哪一种？为什么选择这一种？</li>
  <li>你如何执行交易？人工操作还是自动化？</li>
  <li>关于你的订单执行算法：你用哪种方法构建它们？（即，明单还是暗单，主动的还是被动的？）
    <h4 id="风险管理和监测">·风险管理和监测。</h4>
  </li>
  <li>你的风险模型考虑因素有哪些？为什么选择这些？</li>
  <li>你的不同的风险限额是多少？为什么这样设置？</li>
  <li>什么情况下你会干预自己的模型？</li>
  <li>如果策略在持续运行过程中，你将检测哪些方面？</li>
</ul>

<h3 id="评估宽客的诚信">评估宽客的诚信</h3>
<p>首先，进行背景核查、教育背景审查以及征信调查。</p>

<p>了解宽客的细节也有助于证实他们是否诚实。<br />
尽管技能不足的宽客能够回答他们策略和进程相关的高水平问题，但是目的为欺骗投资者的宽客在回答低水平问题的细节时，很少能够充分回答。这是执法机关常用的、成功的审问技巧。如果你询问嫌疑犯，他昨天晚上在什么地方，他会快速、确切地提供一个托词，诸如“在我女朋友家”，这不足为奇。但是如果你紧接着问他在几点到达女朋友家、呆了多长时间、看了什么电影、在那里吃了什么、喝了什么等信息，他将不得不编造这些问题的答案，而对于这些问题，他可能事先并没有思考过。</p>

<p>如果一个宽客说他在哈佛获得博士学位，你可以继续追问，他当时住在什么地方，最喜欢的餐厅是什么，论文答辩委员会成员是谁，论文题目是什么，论文一共多少页以及其他信息。这些细节应该可以证实哈佛大学是不是他的母校。</p>

<h2 id="第十三章-高速及高频交易概要">第十三章 高速及高频交易概要</h2>
<p>正如1964年，最高法院法官波特·斯图尔特（PotterStewart）的著名言论，“今天，我不会试图用速记所描述的去定义我理解的资料内容，要清晰地定义这些内容，也许我做不到。但是当我看见的时候，我理解……”</p>

<h2 id="第十四章-高速交易">第十四章 高速交易</h2>
<h3 id="延迟根源">延迟根源</h3>
<p>如果你知道标准普尔500指数是由500只股票及500个权重组成，你应该能够计算出标准普尔500指数自下而上的估计值。然而，如果你发现，在去除费用比率以及其他类似于ETF和一篮子股票的结构不同等因素之外，标准普尔500ETF的实际交易值是另外一个不同的值，这时理论上可以买入低估的、卖空高估的，从而免费获得收益。</p>

<h2 id="第十五章-高频交易">第十五章 高频交易</h2>
<h3 id="套利">套利</h3>
<p>高频交易套利最常用的形式是指数套利（index arbitrage），诸如前面标准普尔期货和SPYETF的例子。这个套利指的是，比较跟踪一个指数的金融工具和跟踪同个指数的另一个金融工具之间的值，或者和这个指数的成分股的值相比较。想想一个期货合约跟踪一个指数，指数以50/50的权重包含两个金融产品。这个指数可以直接通过期货合约进行定价，或者间接以每个组成部分的值乘以各自的权重（我们的例子中，均是50%）进行定价。<strong>因为指数与它的组成部分（经常在不同的交易所）各自进行交易，作为整体交易的指数价格和以正确的权重购买成分的综合价格在短时间内存在偏差。</strong></p>

<p>另一种套利类型是跨市场套利（venue arbitrage），这仅存在于分散的市场。</p>

<p>在某种意义上，当契约型做市商收到客户要求在同一时间买进和卖出同一金融工具的订单时，则存在着套利机会，因为它能够以不同的（有利的）价格同时卖出金融产品给一个团体和从另一个团体买入。//这就是中间商赚差价</p>

<h2 id="第十七章-量化交易的展望">第十七章 量化交易的展望</h2>
<p>2007年的量化清算，2008年雷曼兄弟坍塌以及对冲基金行业的制度化，对此有很大的影响。《多德-弗兰克法案》对银行进行自营交易的限制也导致许多有才华的人离开这个行业。<strong>许多宽客，像世界上其他人一样，失业而且看不到前景。</strong>我期望建立量化策略的更厌烦的和昂贵的方面能够得到集中和共享。一个业务结构的主要内容包括数据获取和数据管理、操作和制度管理以及执行。然而，筹集交易资金对于较小的公司和没有知名宽客领导的创新公司仍然具有很大的挑战性。</p>

<p>在多年经历重复事件后，许多有选择的投资专业者厌恶地离开了量化交易领域。对于宽客，这可能是一个自然选择的时间段，较弱的与不幸运的公司被强制退出这个领域，较强和较幸运的公司只有更加努力才能生存下来。//每个行业，每个人都不容易。成年人的世界没有容易二字。宽客的世界也一样。</p>

    </article>
    
    <div class="social-share-wrapper">
        <div class="social-share"></div>
    </div>
    
</div>

<section class="author-detail">
    <section class="post-footer-item author-card">
        <div class="avatar">
            <img src="https://wangxuan.me/assets/img/profile.png" alt="">
        </div>
        <div class="author-name" rel="author">王君敕</div>
        <div class="bio">
            <p>交流，讨论，分享； 思考，总结，沉淀</p>
        </div>
        
        <ul class="sns-links">
            
            <li>
                <a href="//weibo.com/halfg0d" target="_blank">
                    <i class="iconfont icon-weibo"></i>
                </a>
            </li>
            
            <li>
                <a href="//douban.com/people/stardust1900" target="_blank">
                    <i class="iconfont icon-douban"></i>
                </a>
            </li>
            
            <li>
                <a href="//twitter.com/halfg0d" target="_blank">
                    <i class="iconfont icon-twitter"></i>
                </a>
            </li>
            
            <li>
                <a href="//github.com/stardust1900" target="_blank">
                    <i class="iconfont icon-github"></i>
                </a>
            </li>
            
        </ul>
        
    </section>
    <section class="post-footer-item read-next">
        
        
        <div class="read-next-item">
            <a href="/notes/2024/06/29/Centuries-of-Change.html" class="read-next-link"></a>
            <section>
                <span>欧罗巴一千年</span>
                <p>从英国普通人的视角看欧洲从公元1000年到2000年的历史。这个1000年是人类历史上科技发展最快的1000年，也...</p>
            </section>
            
            <div class="filter"></div>
            <img src="/assets/images/20240629/cover.jpg" alt="">
            
        </div>
        
    </section>
        <section class="post-footer-item comment">
        <div id="disqus_thread">
            <script src="https://utteranc.es/client.js"
                    repo="stardust1900/stardust1900.github.io"
                    issue-term="title"
                    label="comment"
                    theme="github-light"
                    crossorigin="anonymous"
                    async>
            </script>
        </div>
    </section>
</section>

<footer class="g-footer">
    <section>
        <a href="/rss.xml" target="_blank">
        <!-- SVG图标代码 -->
        <svg t="1718768161045" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4251" width="15" height="15">
            <path d="M42.666667 853.333333a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m938.666666 128h-178.773333c0-418.986667-340.906667-759.893333-759.893333-759.893333V42.666667c517.546667 0 938.666667 421.12 938.666666 938.666666z m-298.666666 0h-182.826667c0-252.074667-205.098667-457.130667-457.173333-457.130666V341.333333c352.896 0 640 287.104 640 640z" fill="#EE802F" p-id="4252">
            </path>
        </svg>
        </a>
        独行深山 © 2024
    </section>
    <section>Powered by <a href="//jekyllrb.com">Jekyll</a> | <a href="https://github.com/kaeyleo/jekyll-theme-H2O">Theme H2O</a></section>
</footer>

<script src="/assets/js/social-share.min.js"></script>
<script>
    
    socialShare('.social-share', {
        sites: ['wechat','weibo','douban','twitter'],
        wechatQrcodeTitle: "分享到微信朋友圈",
        wechatQrcodeHelper: '<p>扫码后点击右上角</p><p>将本文分享至朋友圈</p>'
    });
    
</script>

<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script src="/assets/js/prism.js"></script>
<script src="/assets/js/index.min.js"></script>

</body>
</html>
